(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{yC3N:function(e,o,t){"use strict";t.r(o),t.d(o,"kup_box",function(){return r});var i=t("zp0o"),n=(t("fcjB"),t("fcTE")),s=t("RoQ+");class r{constructor(e){Object(i.g)(this,e),this.columns=1,this.sortEnabled=!1,this.filterEnabled=!1,this.multiSelection=!1,this.showSelection=!0,this.enableRowActions=!1,this.pagination=!1,this.pageSize=10,this.globalFilterValue="",this.collapsedSection={},this.selectedRows=[],this.currentPage=1,this.visibleColumns=[],this.rows=[],this.filteredRows=[],this.kupBoxClicked=Object(i.d)(this,"kupBoxClicked",6),this.kupBoxSelected=Object(i.d)(this,"kupBoxSelected",6),this.kupAutoBoxSelect=Object(i.d)(this,"kupAutoBoxSelect",6),this.kupRowActionMenuClicked=Object(i.d)(this,"kupRowActionMenuClicked",6),this.kupRowActionClicked=Object(i.d)(this,"kupRowActionClicked",6)}recalculateRows(){this.initRows()}onDataChanged(){this.initVisibleColumns(),this.initRows(),this.checkLayout()}onLayoutChanged(){this.checkLayout()}onSelectBoxChanged(){this.handleAutomaticBoxSelection()}componentWillLoad(){this.onDataChanged()}componentDidLoad(){this.handleAutomaticBoxSelection(),document.addEventListener("click",this.clickFunction.bind(this))}componentDidUnload(){document.removeEventListener("click",this.clickFunction.bind(this))}async loadRowActions(e,o){e.actions=o,this.rowActionMenuOpened=e}getColumns(){return this.data&&this.data.columns?this.data.columns:[{title:"",name:"",size:0}]}initVisibleColumns(){this.visibleColumns=this.getColumns().filter(e=>!e.hasOwnProperty("visible")||e.visible)}getRows(){return this.data&&this.data.rows?this.data.rows:[]}initRows(){if(this.filteredRows=this.getRows(),this.filterEnabled&&this.globalFilterValue){const e=this.visibleColumns;let o=e.length,t=[],i=0;for(;o-- >0;)t.push(e[i++].name);this.filteredRows=Object(n.j)(this.filteredRows,null,this.globalFilterValue,t)}this.rows=this.sortRows(this.filteredRows),this.pagination&&(this.rows=Object(n.t)(this.rows,this.currentPage,this.pageSize))}sortRows(e){let o=e;if(this.sortBy){const e={column:this.sortBy,sortMode:n.d.A};o=Object(n.w)(o,[e])}return o}checkLayout(){if(this.layout)return void(this.boxLayout=this.layout);const e={horizontal:!1,sections:[],style:{textAlign:"center"}},o=this.visibleColumns;let t=o.length,i=[],n=0;for(;t-- >0;)i.push({column:o[n++].name});e.content=i,this.boxLayout={sections:[e]}}onSortChange(e){this.sortBy=e.value.id,this.initRows()}onGlobalFilterChange({detail:e}){this.globalFilterValue=e.value}isSectionExpanded(e,o){return!(!e.id||!o.id)&&this.collapsedSection[o.id]&&this.collapsedSection[o.id][e.id]}handleAutomaticBoxSelection(){this.selectBox&&this.selectBox>0&&this.selectBox<=this.rows.length&&(this.selectedRows=[],this.selectedRows.push(this.rows[this.selectBox-1]),this.kupAutoBoxSelect.emit({row:this.selectedRows[0]}))}checkIfElementIsActionMenuIcon(e){return!(!e.tagName||!e.parentElement)&&"svg"===e.tagName&&e.parentElement.classList.contains("row-actions-toggler")}onBoxClick({target:e},o){if(!(e instanceof HTMLElement))return;let t=e,i=t.classList;for(;!i.contains("box-object")&&!i.contains("box-section")&&!i.contains("box")&&null!==(t=t.parentElement);)i=t.classList;let n=null;i.contains("box-object")&&(n=t.dataset.column),this.kupBoxClicked.emit({row:o,column:n}),this.multiSelection?this.onSelectionCheckChange(o):this.selectedRows=[o]}onSelectionCheckChange(e){const o=this.selectedRows.indexOf(e);o>=0?(this.selectedRows.splice(o,1),this.selectedRows=[...this.selectedRows]):this.selectedRows=[...this.selectedRows,e],this.kupBoxSelected.emit({rows:this.selectedRows})}toggleSectionExpand(e,o){if(o.id)if(e.id){if(this.collapsedSection[o.id]){const t=this.collapsedSection[o.id];t[e.id]=!t[e.id]||!t[e.id]}else this.collapsedSection[o.id]={},this.collapsedSection[o.id][e.id]=!0;this.collapsedSection=Object.assign({},this.collapsedSection)}else console.error("cannot expand / collapse a section of a row without ad id");else console.error("cannot expand / collapse a section withoun an ID")}onRowAction(e){e&&(e!==this.rowActionMenuOpened?e.actions?this.rowActionMenuOpened=e:this.kupRowActionMenuClicked.emit({row:e}):this.rowActionMenuOpened=null)}onRowActionClicked(e,o,t){this.kupRowActionClicked.emit({row:e,action:o,index:t})}clickFunction(e){try{const t=e.composedPath();for(let e of t)if(this.checkIfElementIsActionMenuIcon(e))return}catch(o){if(this.checkIfElementIsActionMenuIcon(e.target))return}this.rowActionMenuOpened=null}handlePageChanged({detail:e}){this.currentPage=e.newPage}renderRow(e){const o=[...this.visibleColumns];let t=null,n=e.layout;n||(n=this.boxLayout);let s=!1;if(n){n.horizontal&&(s=!0);const i=n.sections;let r=i.length,a=0;r>0&&(t=[]);const l={horizontal:s};for(;r-- >0;)t.push(this.renderSection(i[a++],l,e,o))}const r=this.selectedRows.includes(e);let a=null;this.multiSelection&&(a=Object(i.f)("div",{class:"box-selection"},Object(i.f)("input",{type:"checkbox",checked:r,onClick:e=>e.stopPropagation(),onChange:()=>this.onSelectionCheckChange(e)})));let l=null;if(this.enableRowActions){const o={"row-action-menu":!0,open:e===this.rowActionMenuOpened};let t=null;if(e.actions){const o=e.actions.map((o,t)=>{const n=`icon ${o.icon}`;return Object(i.f)("li",{tabindex:"0",onClick:()=>this.onRowActionClicked(e,o,t)},Object(i.f)("div",{class:n}),Object(i.f)("div",{class:"text"},o.text))});t=Object(i.f)("ul",null,o)}l=Object(i.f)("div",{class:"row-actions-wrapper"},Object(i.f)("div",{class:"row-actions-toggler"},Object(i.f)("svg",{version:"1.1",width:"24",height:"24",viewBox:"0 0 24 24",onClick:()=>this.onRowAction(e)},Object(i.f)("path",{d:"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z"})),Object(i.f)("div",{class:o},t)))}let c=null;e.badges&&e.badges.length>0&&(c=e.badges.map(e=>Object(i.f)("kup-badge",{text:e.text,position:e.position,icon:e.icon,class:"centered"})));const d={box:!0,selected:this.showSelection&&r,column:!s};return Object(i.f)("div",{class:"box-wrapper"},Object(i.f)("div",{class:d,onClick:o=>this.onBoxClick(o,e)},a,t,c),l)}renderSection(e,o,t,n){let s=null;if(e.sections&&e.sections.length>0){const o=e.sections;let i=o.length,r=0;for(i>0&&(s=[]);i-- >0;)s.push(this.renderSection(o[r++],e,t,n))}else if(e.content){const o=e.content;let i=o.length,r=0;for(i>0&&(s=[]);i-- >0;)s.push(this.renderBoxObject(o[r++],t,n))}else if(n.length>0){const e=n[0];n.splice(0,1),s=this.renderBoxObject({column:e.name},t,n)}const r=this.isSectionExpanded(t,e),a=!!e.columns,l={"box-section":!0,open:r,column:!a&&!e.horizontal,grid:a,titled:!!e.title,"last-child":!e.sections||0===e.sections.length},c=e.style||{};e.dim&&o&&(c.flex=`0 0 ${e.dim}`,o.horizontal?c.maxWidth=e.dim:c.maxHeight=e.dim),a&&(c["grid-template-columns"]=`repeat(${e.columns}, 1fr)`);let d=null;if(e.collapsible){l["collapse-section"]=!0;const o={content:!0};let n="";n=e.title?e.title:r?"Collassa":"Espandi",d=Object(i.f)("div",{class:l,style:c},Object(i.f)("div",{class:o},s),Object(i.f)("div",{class:"header",role:"button",onClick:o=>{o.stopPropagation(),this.toggleSectionExpand(t,e)}},Object(i.f)("div",{class:"header-content"},Object(i.f)("span",null,n),Object(i.f)("span",{class:"mdi mdi-chevron-down"}))))}else{const o=e.title?Object(i.f)("h3",null,e.title):null;d=Object(i.f)("div",{class:l,style:c},o,s)}return d}renderBoxObject(e,o,t){let s=null,r={};if(e.value)s=e.value;else if(e.column){const a=o.cells[e.column];if(a){let o=-1;for(let i=0;i<t.length;i++)if(t[i].name===e.column){o=i;break}if(o>=0&&t.splice(o,1),a.style&&(r=Object.assign({},a.style)),Object(n.f)(a.obj)){let e=null;a.config&&a.config.badges&&(e=a.config.badges),s=Object(i.f)("kup-image",{src:a.value,badges:e})}else if(Object(n.g)(a.obj))s=Object(i.f)("kup-button",Object.assign({},Object(n.h)(a)));else if(Object(n.i)(a.obj)){const e=Object(n.r)(a.value).value();let o=!1,t=null;const r={};a.config&&(o=!!a.config.hideLabel,a.config.hasOwnProperty("labelText")&&(t=a.config.labelText),a.config.foregroundColor&&(r["--kup-pb_foreground-color"]=a.config.foregroundColor)),s=Object(i.f)("div",{style:r},Object(i.f)("kup-progress-bar",{value:e,labelText:t,hideLabel:o}))}else s=a.value}}return Object(i.f)("div",{"data-column":e.column,class:"box-object",style:r},s)}render(){let e=null;if(this.sortEnabled){let o={value:"",id:""};const t=[{value:"",id:""},...this.visibleColumns.map(e=>{const t={value:e.title,id:e.name};return e.name===this.sortBy&&(o=t),t})];e=Object(i.f)("div",{id:"sort-panel"},Object(i.f)("kup-combo",{displayedField:"value",items:t,initialValue:o,onKetchupComboSelected:e=>this.onSortChange(e.detail)}))}let o=null;this.filterEnabled&&(o=Object(i.f)("div",{id:"filter-panel"},Object(i.f)("kup-text-input",{placeholder:"Cerca",onKetchupTextInputUpdated:e=>this.onGlobalFilterChange(e)},Object(i.f)("svg",{slot:"left",version:"1.1",width:"18",height:"18",viewBox:"0 0 24 24"},Object(i.f)("path",{d:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"})))));let t=null;this.pagination&&(t=Object(i.f)("kup-paginator",{max:this.filteredRows.length,perPage:this.pageSize,currentPage:this.currentPage,onKupPageChanged:e=>this.handlePageChanged(e),mode:s.a.SIMPLE}));let n=null;if(0===this.rows.length)n=Object(i.f)("p",{id:"empty-data-message"},"Empty data");else{const e=this.rows;let o=e.length,t=0;for(n=[];o-- >0;)n.push(this.renderRow(e[t++]))}const r={"grid-template-columns":`repeat(${this.columns}, 1fr)`};return Object(i.f)("div",null,e,o,t,Object(i.f)("div",{id:"box-container",style:r},n))}static get watchers(){return{globalFilterValue:["recalculateRows"],sortBy:["recalculateRows"],pagination:["recalculateRows"],pageSize:["recalculateRows"],currentPage:["recalculateRows"],data:["onDataChanged"],layout:["onLayoutChanged"],selectBox:["onSelectBoxChanged"]}}static get style(){return"@import url(https://cdn.materialdesignicons.com/3.6.95/css/materialdesignicons.min.css);:host{--box_color:var(--kup-box_color,#707070);--box_border-color:var(--kup-box_border-color,#d0d0d0);--box_border-radius:var(--kup-box_border-radius,3px);--box_img-border-radius:var(--kup-box_img-border-radius,4px);--box_expand-panel-color:var(--kup-box_expand-panel-color,$smeup-primary);--box_hover-box-shadow:var(--kup-box_hover-box-shadow,0px 0px 7.5px 0px hsla(0,0%,50.2%,0.5));--box_titled-section-font-size:var(--kup-box_titled-section-font-size,12px);--box_titled-section-bg-color:var(--kup-box_titled-section-bg-color,#fff);--box_titled-section-top:var(--kup-box_titled-section-top,-9px)}#box-container{display:grid;grid-gap:1rem;color:var(--box_color)}#box-container *{-webkit-box-sizing:border-box;box-sizing:border-box}#box-container .box-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}#box-container .box-wrapper .box{-ms-flex-positive:1;flex-grow:1;cursor:pointer;position:relative;border-radius:var(--box_border-radius);border:1px solid var(--box_border-color);display:-ms-flexbox;display:flex;padding:3px}#box-container .box-wrapper .box.column{-ms-flex-direction:column;flex-direction:column}#box-container .box-wrapper .box.selected,#box-container .box-wrapper .box:hover{-webkit-box-shadow:var(--box_hover-box-shadow);box-shadow:var(--box_hover-box-shadow)}#box-container .box-wrapper .box .box-section{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex:1 1 1%;flex:1 1 1%;-ms-flex-wrap:wrap;flex-wrap:wrap}#box-container .box-wrapper .box .box-section.last-child{margin:3px 4px}#box-container .box-wrapper .box .box-section.column{-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;-ms-flex-wrap:unset;flex-wrap:unset}#box-container .box-wrapper .box .box-section.column>.box-section{-ms-flex:0 0 auto;flex:0 0 auto}#box-container .box-wrapper .box .box-section.grid{display:grid}#box-container .box-wrapper .box .box-section .box-object{padding:1px 4px}#box-container .box-wrapper .box .box-section .box-object img{border-radius:var(--box_img-border-radius);height:auto}#box-container .box-wrapper .box .box-section.collapse-section .header{border-top:1px solid var(--box_border-color);color:var(--box_expand-panel-color);display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;width:100%}#box-container .box-wrapper .box .box-section.collapse-section .header .header-content{margin:.5rem;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}#box-container .box-wrapper .box .box-section.collapse-section .header .header-content .mdi{margin-left:5px}#box-container .box-wrapper .box .box-section.collapse-section .content{display:none;width:100%}#box-container .box-wrapper .box .box-section.collapse-section.open .header .header-content .mdi:before{-webkit-animation:rotate-icon .5s ease-out forwards;animation:rotate-icon .5s ease-out forwards}#box-container .box-wrapper .box .box-section.collapse-section.open .content{display:block}#box-container .box-wrapper .box .box-section.titled{border:1px solid var(--box_border-color);padding-top:5px;position:relative;margin:10px}#box-container .box-wrapper .box .box-section.titled>h3{position:absolute;margin:0;padding:0 3px;top:var(--box_titled-section-top);left:5px;font-size:var(--box_titled-section-font-size);background:var(--box_titled-section-bg-color)}#box-container .box-wrapper .box .box-selection{position:absolute;top:.5rem;right:.5rem}#box-container .box-wrapper .box kup-badge{--bdg_background-color:#f89406;--kup-badge_dimension:24px}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler{position:relative;width:24px;height:24px;margin-left:3px}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler svg{cursor:pointer;opacity:0;fill:#545454;-webkit-transition:opacity .5s ease-out;transition:opacity .5s ease-out}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler .row-action-menu{position:absolute;top:0;right:24px;display:none;border:1px solid var(--box_border-color);z-index:10;background:#fff;-webkit-box-shadow:0 0 7.5px 0 hsla(0,0%,50.2%,.5);box-shadow:0 0 7.5px 0 hsla(0,0%,50.2%,.5)}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler .row-action-menu ul{list-style-type:none;margin:0;padding:0}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler .row-action-menu ul>li{cursor:pointer;white-space:nowrap;padding:0 12px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;line-height:30px}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler .row-action-menu ul>li:not(:last-child){border-bottom:1px solid var(--box_border-color)}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler .row-action-menu ul>li .icon{margin-right:5px}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler .row-action-menu.open{display:block}#box-container .box-wrapper:hover .row-actions-wrapper .row-actions-toggler svg{opacity:1}:host(.no-shadow) #box-container .box{border:none}:host(.no-shadow) #box-container .box.selected,:host(.no-shadow) #box-container .box:hover{-webkit-box-shadow:none;box-shadow:none}#filter-panel,#sort-panel{margin-bottom:1rem}#filter-panel kup-text-input{--kup-text-input_border-color:#d0d0d0;--kup-text-input_color:#545454}#filter-panel svg{fill:grey;margin-left:3px}@-webkit-keyframes rotate-icon{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(180deg);transform:rotate(180deg)}}@-moz-keyframes rotate-icon{0%{transform:rotate(0deg)}to{transform:rotate(180deg)}}@-o-keyframes rotate-icon{0%{transform:rotate(0deg)}to{transform:rotate(180deg)}}@keyframes rotate-icon{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(180deg);transform:rotate(180deg)}}"}}}}]);