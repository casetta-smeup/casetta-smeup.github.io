import{r as t,c as i,h as o,g as s}from"./p-df6a2f70.js";class e{constructor(o){t(this,o),this.layout="1",this.visible=!1,this.detailVisible=!1,this.tooltipPosition={},this.kupTooltipLoadDetailTriggered=!1,this.kupTooltipLoadDetail=i(this,"kupTooltipLoadDetail",6)}onDataChanged(){this.detailVisible=!0}hasData(){return!!this.detailData&&!!this.detailData.rows}resetTimeouts(){this.tooltipTimeout&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=null),this.loadDetailTimeout&&(clearTimeout(this.loadDetailTimeout),this.loadDetailTimeout=null)}loadDetail(){this.loadDetailTimeout=null,this.kupTooltipLoadDetail.emit(),this.kupTooltipLoadDetailTriggered=!0}get rows(){return this.hasData()?this.detailData.rows:[]}onMouseOver(){this.tooltipTimeout||(this.tooltipTimeout=setTimeout(()=>{this.tooltipTimeout=null,this.tooltipPosition={};const t=this.wrapperEl.getBoundingClientRect();window.innerHeight-t.bottom<150?this.tooltipPosition.bottom=`${t.height+3}px`:this.tooltipPosition.top=`${t.height}px`,window.innerWidth-t.left<350?this.tooltipPosition.right="0":this.tooltipPosition.left="0",this.visible=!0,this.loadDetailTimeout=this.kupTooltipLoadDetailTriggered?setTimeout(()=>this.detailVisible=!0,250):setTimeout(()=>this.loadDetail(),250)},500))}onMouseLeave(){this.resetTimeouts(),this.visible=!1,this.detailVisible=!1}getDefaultLayout(){return[o("div",{class:"left"},o("slot",{name:"slot1"})),o("div",{class:"right"},o("div",null,o("slot",{name:"slot2"})),o("div",{class:"slot3"},o("slot",{name:"slot3"})),o("div",null,o("slot",{name:"slot4"})))]}getLayout2(){return o("div",null,o("slot",{name:"slot1"}))}getLayout3(){return[o("div",{class:"slot1"},o("slot",{name:"slot1"})),o("div",{class:"slot2"},o("slot",{name:"slot2"})),o("div",{class:"slot3"},o("slot",{name:"slot3"}))]}createTooltip(){let t=null;const i={};"2"===this.layout?(t=this.getLayout2(),i.layout2=!0):"3"===this.layout?(t=this.getLayout3(),i.layout3=!0):t=this.getDefaultLayout();let s=null;this.hasData()&&(s=this.rows.map(t=>o("div",{class:"detail-row"},o("div",{class:"detail-row__label"},t.cells.label.value),o("div",{class:"detail-row__value"},t.cells.value.value))));const e={visible:this.detailVisible&&this.hasData()},l=Object.assign({},this.tooltipPosition);return o("div",{id:"tooltip",hidden:!this.visible,style:l},o("div",{id:"main-content",class:i},t),o("div",{id:"detail",class:e},s))}render(){return o("div",{id:"wrapper",onMouseOver:this.onMouseOver.bind(this),onMouseLeave:this.onMouseLeave.bind(this),ref:t=>this.wrapperEl=t},o("slot",null),this.createTooltip())}get tooltipEl(){return s(this)}static get watchers(){return{detailData:["onDataChanged"]}}static get style(){return":host{--tlt_background:var(--kup-tlt_background,#fff);--tlt_detail-lbl-color:var(--kup-detail-lbl-color,#888);--tlt_shadow:var(--kup-tlt_shadow,0px 0px 7.5px 0px hsla(0,0%,50.2%,0.5))}:host #wrapper{position:relative;display:inline-block}:host #wrapper #tooltip{position:absolute;background:var(--tlt_background);z-index:1000;-webkit-box-shadow:var(--tlt_shadow);box-shadow:var(--tlt_shadow);border-radius:3px;min-width:350px}:host #wrapper #tooltip #main-content{margin:20px;display:-ms-flexbox;display:flex}:host #wrapper #tooltip #main-content .left{width:75px;margin-right:15px}:host #wrapper #tooltip #main-content .right{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:justify;justify-content:space-between}:host #wrapper #tooltip #main-content.layout2{-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}:host #wrapper #tooltip #main-content.layout3{-ms-flex-direction:column;flex-direction:column}:host #wrapper #tooltip #main-content.layout3>div:not(:last-child){margin-bottom:6px}:host #wrapper #tooltip #detail:not(.visible){max-height:0;opacity:0;-webkit-transition:max-height .5s ease-out,opacity .5s ease-out;transition:max-height .5s ease-out,opacity .5s ease-out}:host #wrapper #tooltip #detail.visible{border-top:1px solid #ccc;padding:20px;max-height:500px;opacity:1;-webkit-transition:max-height .5s ease-in,opacity .5s ease-in;transition:max-height .5s ease-in,opacity .5s ease-in}:host #wrapper #tooltip #detail .detail-row{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}:host #wrapper #tooltip #detail .detail-row:not(:last-child){margin-bottom:6px}:host #wrapper #tooltip #detail .detail-row__label{color:var(--tlt_detail-lbl-color)}"}}export{e as kup_tooltip};