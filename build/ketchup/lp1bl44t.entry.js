const t=window.ketchup.h;class e{constructor(){this.filterable=!1,this.sortable=!1,this.sort={code:"",sortMode:""},this.hackzor=!1}onSort(t){this.sortable&&(t.sortMode="A"===t.sortMode?"D":"A",this.sort={code:t.name,sortMode:t.sortMode})}sortRows(t){return 0==t.filter(t=>!t.group).length?t:t.sort((t,e)=>{const l=t.values[this.sort.code],s=e.values[this.sort.code],r=this.columns.filter(t=>t.name===this.sort.code)[0].sortMode,o=l.localeCompare(s);return"A"===r?o:-1*o})}onCellClickedHandler(t,e){this.onCellClicked.emit({c:t,r:e}),e.selected||(this.rows.forEach(t=>t.selected=!1),e.selected=!0,this.hackzor=!this.hackzor)}onFilterChangeHandler(t,e){e.filterValue=t.target.value,this.hackzor=!this.hackzor}filterRows(t){const e=this.columns.filter(t=>!!t.filterValue&&t.filterValue.length>0);return t.filter(t=>!(e.length>0)||e.filter(e=>{let l=t.values[e.name];return!!l&&l.includes(e.filterValue)}).length==e.length)}render(){let e=null;if(this.columns){const l=this.sortable?"sortable":"";e=this.columns.map((e,s)=>{let r=null;return this.filterable&&(r=t("input",{type:"text",value:e.filterValue?e.filterValue:"",onChange:t=>this.onFilterChangeHandler(t,e)})),t("th",{class:l},t("span",{onClick:this.onSort.bind(this,e,s)},e.title),t("br",null),r)})}let l=null;if(this.rows){let e=this.rows;this.sort.code&&(e=this.sortRows(this.rows)),l=this.filterRows(e).map(e=>t("tr",{class:e.selected?"selected":""},this.columns.map(l=>t("td",{onClick:this.onCellClickedHandler.bind(this,l,e)},e.values[l.name]))))}return t("div",null,t("slot",null),t("table",null,t("thead",null,t("tr",null,e)),t("tbody",null,l)))}static get is(){return"smeup-mat"}static get properties(){return{columns:{type:"Any",attr:"columns"},filterable:{type:Boolean,attr:"filterable"},hackzor:{state:!0},rows:{type:"Any",attr:"rows"},sort:{state:!0},sortable:{type:Boolean,attr:"sortable"}}}static get events(){return[{name:"onCellClicked",method:"onCellClicked",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return"smeup-mat table{width:calc(100% - 2rem);border-collapse:collapse}smeup-mat table tr td,smeup-mat table tr th{padding:8px 5px;border:1px solid #ddd}smeup-mat table thead th.sortable{cursor:pointer}smeup-mat table tbody tr.selected{background:#f08080}smeup-mat table tbody tr:hover{background:#ccc}"}}export{e as SmeupMat};